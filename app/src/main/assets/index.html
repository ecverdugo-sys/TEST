<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Cuestionario por Temas</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>CUESTIONARIO POR TEMAS</h1>
    <p class="subtitle">Carga un TXT y selecciona temas o números</p>
  </header>

  <section class="card">
    <label class="label">Selecciona archivo TXT</label>
    <input type="file" id="fileInput" accept=".txt">
    <p id="fileHint" class="muted">Archivos admitidos: TXT con bloques de preguntas y sección "RESPUESTAS CORRECTAS".</p>
    <div id="loadStatus" class="muted"></div>
  </section>

  <section id="themeSelector" class="card" style="display:none;">
    <h2>Selección por temas</h2>
    <label for="themeDropdown">Selecciona uno o varios temas</label>
    <select id="themeDropdown" multiple size="10"></select>
    <label class="checkbox"><input type="checkbox" id="selectAllThemes"> Seleccionar todos</label>
    <div class="actions">
      <button id="applyThemesBtn">Aplicar selección de temas</button>
      <button id="clearThemesBtn" class="ghost">Limpiar selección</button>
    </div>
    <div id="selectedThemes">
      <strong>Temas seleccionados:</strong>
      <ul id="selectedThemesList"></ul>
    </div>
  </section>

  <section id="numberSelector" class="card" style="display:none;">
    <h2>Selección por números</h2>
    <label for="numbersInput">Introduce números de pregunta separados por coma</label>
    <input type="text" id="numbersInput" placeholder="Ej.: 12, 45, 78">
    <div class="actions">
      <button id="applyNumbersBtn">Aplicar selección por números</button>
      <button id="clearNumbersBtn" class="ghost">Limpiar</button>
    </div>
  </section>

  <section id="quizContainer" class="card" style="display:none;">
    <div id="questionHeader">
      <div id="questionNumber"></div>
      <div id="questionMeta"></div>
    </div>
    <div id="questionText" class="question"></div>
    <div id="answerOptions" class="options"></div>
    <div id="feedback" class="feedback"></div>
    <div class="actions">
      <button id="nextButton" style="display:none;">Siguiente</button>
      <button id="skipButton">No responder a la pregunta</button>
      <button id="statsButton" class="ghost">Estadísticas</button>
    </div>
  </section>

  <section id="failedPanel" class="card" style="display:none;">
    <div id="failedQuestionsDisplay"></div>
  </section>

  <section id="stats" class="card" style="display:none;">
    <p>Total: <span id="totalQuestions">0</span> · Respondidas: <span id="answeredCount">0</span> · Restantes: <span id="remainingCount">0</span></p>
    <p>Aciertos: <span id="correctCount">0</span> · Fallos: <span id="incorrectCount">0</span> · Puntuación: <span id="score">0</span></p>
    <p id="timer">Tiempo transcurrido: 00:00:00</p>
  </section>

  <div id="statsModal" class="modal" style="display:none;">
    <div class="modal-content">
      <h3>Estadísticas por tema</h3>
      <table id="statsTable">
        <thead><tr><th>Tema</th><th>Presentadas</th><th>Aciertos</th><th>Fallos</th><th>% Acierto</th></tr></thead>
        <tbody></tbody>
      </table>
      <button id="closeStatsBtn">Cerrar</button>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
